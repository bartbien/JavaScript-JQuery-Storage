<html>
<body>

	<h1>My First JavaScript</h1>


	<canvas id="canvas"></canvas>

	<script>
		(function() {
			var requestAnimationFrame = window.requestAnimationFrame
					|| window.mozRequestAnimationFrame
					|| window.webkitRequestAnimationFrame
					|| window.msRequestAnimationFrame;
			window.requestAnimationFrame = requestAnimationFrame;
		})();

		window.onload = function init() {
			var canvas = document.getElementById("canvas");
			var ctx = canvas.getContext("2d");
			gameLoop();
		}

		window.addEventListener("keydown", function(e) {
			keys[e.keyCode] = true;
		});
		window.addEventListener("keyup", function(e) {
			keys[e.keyCode] = false;
		});

		var avatarX = 400, avatarY = 300, velX = 0, velY = 0, keys = [], maxSpeed = 10;

		function gameLoop() {
			whatKey();
			var canvas = document.getElementById("canvas");
			var ctx = canvas.getContext("2d");
			canvas.width = 800;
			canvas.height = 600;

			avatarX += velX;
			avatarY += velY;

			ctx.fillRect(velX, velY, 50, 50);
			requestAnimationFrame(gameLoop);
		}

		function whatKey() {
			if (keys[37]) {
				//velX = -10;
				
					velX -= 5;
				
			}

			if (keys[39]) {
				//velX = 10;
				
					velX += 5;
				
			}
			if (keys[40]) {
				//velY = 10;
				
					velY += 5;
				
			}
			if (keys[38]) {
				//velY = -10;
				
					velY -= 5;
				
			}
		}
	</script>

</body>
</html>
